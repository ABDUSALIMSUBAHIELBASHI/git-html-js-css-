<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Safe File Name Generator (Neubrutalist)</title>
  <style>
    /* ðŸŽ¨ NEUBRUTALISM PALETTE */
    :root{
      --bg: #fdfdfd;          /* Off-white background */
      --card-bg: #ffffff;      /* Pure white card */
      --text: #111111;         /* Pure black text */
      --muted: #444444;       /* Dark gray for labels */
      --accent: #bada55;       /* Bright Lime Green for primary action */
      --secondary-accent: #ff8844; /* Bright Orange for secondary action */
      --border: 2px solid var(--text); /* Thick black border */
      --shadow-offset: 6px;
      --radius: 0;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
    }

    /* CARD STYLE */
    .card{
      width:100%;
      max-width:840px;
      background: var(--card-bg);
      border-radius:var(--radius);
      padding:28px;
      border: var(--border);
      /* Hard, prominent shadow */
      box-shadow: var(--shadow-offset) var(--shadow-offset) 0 var(--text);
      display:grid;
      gap:24px; /* Increased gap */
      grid-template-columns: 1fr 360px;
    }

    @media (max-width:900px){
      .card{grid-template-columns:1fr; padding:20px}
    }

    /* HEADER */
    header{
      grid-column: 1 / -1;
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:space-between;
      border-bottom: 1px dashed var(--muted); /* Separator line */
      padding-bottom: 16px;
    }
    .title{
      display:flex;
      gap:14px;
      align-items:center;
    }
    .logo{
      width:56px;
      height:56px;
      border-radius:var(--radius);
      display:grid;
      place-items:center;
      background: var(--accent);
      color:var(--text);
      font-weight:800;
      font-size:22px;
      border: var(--border);
      box-shadow: 4px 4px 0 var(--text);
    }
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:14px}
    .hint{color:var(--muted);font-size:13px}

    /* INPUTS & CONTROLS */
    .controls{
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    label{
      font-size:14px;
      color:var(--muted);
      display:block;
      margin-bottom:8px;
      font-weight:700;
    }

    input[type="text"]{
      width:100%;
      padding:12px;
      border-radius:var(--radius);
      border:var(--border);
      background:var(--card-bg);
      color:inherit;
      outline:none;
      font-size:16px;
      box-shadow: 2px 2px 0 var(--text);
      transition: all 0.1s ease;
    }
    input[type="text"]:focus {
      box-shadow: 4px 4px 0 var(--text);
    }

    .row{
      display:flex;
      gap:10px;
      align-items:center;
    }

    /* BUTTONS */
    .btn{
      appearance:none;
      border:var(--border);
      background:var(--accent);
      color:var(--text);
      padding:10px 14px;
      border-radius:var(--radius);
      cursor:pointer;
      font-weight:600;
      font-size:14px;
      box-shadow: 4px 4px 0 var(--text);
      transition: all 0.1s ease;
    }
    .btn:active {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0 var(--text);
    }

    .btn.ghost{
      background:var(--secondary-accent); /* Orange secondary color */
      color:var(--text);
      border:var(--border);
      box-shadow: 4px 4px 0 var(--text);
    }
    .btn.ghost:active {
      transform: translate(2px, 2px);
      box-shadow: 2px 2px 0 var(--text);
    }

    /* RESULT BOX */
    .result{
      background: var(--bg);
      padding:14px;
      border-radius:var(--radius);
      border:var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      font-family: ui-monospace, monospace;
      font-size:14px;
      color:var(--text);
      word-break:break-all;
    }

    /* ASIDE (BEHAVIOR/INFO) */
    aside{
      padding:18px;
      border-radius:var(--radius);
      background: var(--bg);
      border:var(--border);
      box-shadow: var(--shadow-offset) var(--shadow-offset) 0 var(--text);
      display:flex;
      flex-direction:column;
      gap:16px;
      min-height:180px;
    }
    .meta{
      color:var(--text);
      font-size:14px;
      font-weight:700;
    }
    .small{
      font-size:13px;
      color:var(--muted);
    }
    
    /* SELECT & LIST */
    select{
      width:100%; 
      padding:8px; 
      border-radius:var(--radius); 
      background:white; 
      color:var(--text); 
      border:var(--border);
      box-shadow: 2px 2px 0 var(--text);
    }
    aside ul {
      margin-top: 4px;
      padding-left: 20px;
      line-height: 1.5;
    }
    
    /* FOOTER */
    footer{
      grid-column:1 / -1;
      display:flex;
      justify-content:flex-end;
      color:var(--muted);
      font-size:12px;
      gap:12px;
      padding-top: 10px;
      border-top: 1px dashed var(--muted);
    }
  </style>
</head>
<body>
  <main class="card" role="main">
    <header>
      <div class="title">
        <div class="logo">SF</div>
        <div>
          <h1>Safe File Name</h1>
          <p class="lead">Generate a UUID-based safe filename while preserving an extension (if present).</p>
        </div>
      </div>
      <div class="hint">Uses <code>crypto.randomUUID()</code> â€” supported in modern browsers</div>
    </header>

    <section class="controls" aria-labelledby="inputLabel">
      <div>
        <label id="inputLabel" for="nameInput">Original filename / content</label>
        <input id="nameInput" type="text" placeholder="example.png or my.document.pdf or just-a-name" />
      </div>

      <div class="row">
        <button id="generateBtn" class="btn">Generate safe name</button>
        <button id="genRandomBtn" class="btn ghost" title="Generate UUID-only (no extension)">Generate random UUID</button>
        <button id="pasteBtn" class="btn ghost" title="Paste from clipboard">Paste â†˜</button>
      </div>

      <div>
        <label>Result</label>
        <div class="result" id="resultBox" aria-live="polite">â€”</div>
      </div>

      <div class="row">
        <button id="copyBtn" class="btn ghost">Copy</button>
        <button id="downloadBtn" class="btn">Download empty file</button>
        <button id="showPartsBtn" class="btn ghost">Show parts</button>
      </div>
    </section>

    <aside>
      <div class="meta"><strong>Behavior</strong></div>
      <div class="small">
        <ul>
          <li>When the input contains at least one dot (<code>.</code>), the text after the last dot is treated as the extension and kept.</li>
          <li>If there is no dot, the result will be the UUID only.</li>
          <li>Leading/trailing whitespace is trimmed before processing.</li>
        </ul>
      </div>

      <div>
        <label for="exampleSelect" class="small">Quick examples</label>
        <select id="exampleSelect">
          <option value="">â€” choose an example â€”</option>
          <option>photo.jpg</option>
          <option>report.final.pdf</option>
          <option>archive</option>
          <option>.env</option>
          <option>backup.tar.gz</option>
        </select>
      </div>

      <div class="meta" id="partsArea" style="display:none;">
        <div><strong>Parsed parts</strong></div>
        <div class="small" id="partsText">base: â€” | ext: â€”</div>
      </div>
    </aside>

    <footer>
      <div>Made to match your <code>safeFileName</code> logic</div>
    </footer>
  </main>

  <script>
    function safeFileName(content) {
      const trimmed = (content ?? '').toString().trim();
      const hex = (typeof crypto !== 'undefined' && crypto.randomUUID) ? crypto.randomUUID() : fallbackUUID();
      const fileNameParts = trimmed.split('.');
      if (fileNameParts.length > 1 && trimmed !== '' && !trimmed.startsWith('.')) {
        const ext = fileNameParts.pop();
        return `${hex}.${ext}`;
      } else {
        return hex;
      }
    }

    function fallbackUUID() {
     
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        const r = Math.random() * 16 | 0;
        const v = c === 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
      });
    }

    const nameInput = document.getElementById('nameInput');
    const generateBtn = document.getElementById('generateBtn');
    const genRandomBtn = document.getElementById('genRandomBtn');
    const pasteBtn = document.getElementById('pasteBtn');
    const resultBox = document.getElementById('resultBox');
    const copyBtn = document.getElementById('copyBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const showPartsBtn = document.getElementById('showPartsBtn');
    const partsArea = document.getElementById('partsArea');
    const partsText = document.getElementById('partsText');
    const exampleSelect = document.getElementById('exampleSelect');

    function updateResultFromInput() {
      const val = nameInput.value;
      const out = safeFileName(val);
      resultBox.textContent = out;
      partsArea.style.display = 'none';
    }

    generateBtn.addEventListener('click', () => {
      updateResultFromInput();
    });

    genRandomBtn.addEventListener('click', () => {
      
      const hex = (typeof crypto !== 'undefined' && crypto.randomUUID) ? crypto.randomUUID() : fallbackUUID();
      resultBox.textContent = hex;
      partsArea.style.display = 'none';
    });

    pasteBtn.addEventListener('click', async () => {
      try {
        const text = await navigator.clipboard.readText();
        nameInput.value = text;
        updateResultFromInput();
      } catch (err) {
        alert('Clipboard read failed â€” you can paste manually.');
      }
    });

    copyBtn.addEventListener('click', async () => {
      const text = resultBox.textContent || '';
      try {
        await navigator.clipboard.writeText(text);
        copyBtn.textContent = 'Copied âœ“';
        setTimeout(()=> copyBtn.textContent = 'Copy', 1200);
      } catch (err) {
      
        alert('Copy to clipboard failed. Result:\n' + text);
      }
    });

    downloadBtn.addEventListener('click', () => {
      const fname = resultBox.textContent || safeFileName('');
     
      const blob = new Blob([''], { type: 'application/octet-stream' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = fname;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    showPartsBtn.addEventListener('click', () => {
      const raw = (nameInput.value || '').trim();
      if (raw === '') {
        partsText.textContent = 'No input provided.';
        partsArea.style.display = 'block';
        return;
      }
      const parts = raw.split('.');
      if (parts.length > 1 && !raw.startsWith('.')) {
        const ext = parts.pop();
        const base = parts.join('.');
        partsText.textContent = `base: "${base}" | ext: "${ext}" (keeps last segment as extension)`;
      } else {
        partsText.textContent = `base: "${raw}" | ext: â€” (treated as no extension)`;
      }
      partsArea.style.display = 'block';
    });

    exampleSelect.addEventListener('change', (e) => {
      const v = e.target.value;
      if (!v) return;
      nameInput.value = v;
      updateResultFromInput();
    });

    nameInput.addEventListener('keydown', (ev) => {
      if (ev.key === 'Enter') {
        ev.preventDefault();
        updateResultFromInput();
      }
    });

    nameInput.value = 'example.png';
    updateResultFromInput();
  </script>
</body>
</html>